!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=1)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));const o="https://api.flickr.com/services",i={};function r(t,n){var r=document.createElement("script");r.setAttribute("src",`${o}${t}&jsoncallback=${n}`),r.onload=function(){document.body.removeChild(r)};const s=new Promise(t=>{e[n]=function(o){i[n]--,0===i[n]&&delete i[n],0===i&&delete e[n],t(o)}});return void 0===i[n]&&(i[n]=0),i[n]++,document.body.appendChild(r),s}}).call(this,n(7))},function(e,t,n){e.exports=n(8)},function(e,t,n){"use strict";n.r(t),t.default=n.p+"index.html"},function(e,t,n){var o=n(4);"string"==typeof o&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};n(6)(o,i);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,"*{box-sizing:border-box}body{background-color:#ebe1f5;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:16px;margin:0;overflow:hidden}.app{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100vh;width:100vw}.text-white{color:#fdfcfe}.text-align-center{text-align:center}.primary{color:#ff1493}.hidden{display:none !important}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=(s=o,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),r=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot).concat(e," */")}));return[n].concat(r).concat([i]).join("\n")}var s,a,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];null!=r&&(o[r]=!0)}for(var s=0;s<e.length;s++){var a=e[s];null!=a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="(".concat(a[2],") and (").concat(n,")")),t.push(a))}},t}},function(e,t,n){"use strict";var o,i={},r=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function a(e,t){for(var n=[],o={},i=0;i<e.length;i++){var r=e[i],s=t.base?r[0]+t.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function c(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id],s=0;if(r){for(r.refs++;s<r.parts.length;s++)r.parts[s](o.parts[s]);for(;s<o.parts.length;s++)r.parts.push(g(o.parts[s],t))}else{for(var a=[];s<o.parts.length;s++)a.push(g(o.parts[s],t));i[o.id]={id:o.id,refs:1,parts:a}}}}function d(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var o=n.nc;o&&(e.attributes.nonce=o)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var i=s(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var l,u=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function m(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var r=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function h(e,t,n){var o=n.css,i=n.media,r=n.sourceMap;if(i&&e.setAttribute("media",i),r&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var f=null,p=0;function g(e,t){var n,o,i;if(t.singleton){var r=p++;n=f||(f=d(t)),o=m.bind(null,n,r,!1),i=m.bind(null,n,r,!0)}else n=d(t),o=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=a(e,t);return c(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var s=n[r],d=i[s.id];d&&(d.refs--,o.push(d))}e&&c(a(e,t),t);for(var l=0;l<o.length;l++){var u=o[l];if(0===u.refs){for(var m=0;m<u.parts.length;m++)u.parts[m]();delete i[u.id]}}}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var o=n(0);class i extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.render()}disconnectedCallback(){this.shadowRoot.querySelector("form").removeEventListener("submit")}render(){const e=document.createElement("template");e.innerHTML="\n      <style>\n        input {\n          margin: 0.5rem;\n          max-width: 100%;\n          flex: 1 0 auto;\n          outline: 0;\n          text-align: left;\n          line-height: 1.2em;\n          font-family: Lato,'Helvetica Neue',Arial,Helvetica,sans-serif;\n          padding: .67em 1em;\n          background: #fff;\n          border: 1px solid lightgray;\n          border-radius: .28rem;\n        }\n        button {\n          cursor: pointer;\n          min-height: 1em;\n          outline: 0;\n          border: none;\n          vertical-align: baseline;\n          background: #2185d0 none;\n          color: #fff;\n          font-family: Lato,'Helvetica Neue',Arial,Helvetica,sans-serif;\n          margin: 0 .25em 0 0;\n          padding: .78571429em 1.5em .78571429em;\n          text-transform: none;\n          text-shadow: none;\n          font-weight: 700;\n          line-height: 1em;\n          font-style: normal;\n          text-align: center;\n          text-decoration: none;\n          border-radius: .28rem;\n          box-shadow: 0 0 0 1px transparent inset, 0 0 0 0 rgba(34,36,38,.15) inset;\n          user-select: none;\n          transition: opacity .1s ease,background-color .1s ease,color .1s ease,background .1s ease,-webkit-box-shadow .1s ease;\n          transition: opacity .1s ease,background-color .1s ease,color .1s ease,box-shadow .1s ease,background .1s ease;\n          transition: opacity .1s ease,background-color .1s ease,color .1s ease,box-shadow .1s ease,background .1s ease,-webkit-box-shadow .1s ease;\n          will-change: '';\n        }\n        button:hover {\n          background-color: #1678c2;\n        }\n        button:active {\n          background-color: #1a69a4;\n        }\n      </style>\n      <div class=\"search-bar\">\n        <form>\n          <input />\n          <button type=\"submit\">Search</button>\n        </form>\n      </div>\n    ",this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.shadowRoot.querySelector("form").addEventListener("submit",async e=>{e.preventDefault();const t=await async function(e=""){const t=`/feeds/photos_public.gne?format=json&safe_search=1&media=photos&tags=${e}`;return Object(o.a)(t,"jsonFlickrFeed")}(this.shadowRoot.querySelector("input").value);t&&Array.isArray(t.items)&&0!==t.items.length?this.dispatchEvent(new CustomEvent("submit",{detail:t})):alert("Did not find any images. Please try a different search query.")},!1)}}window.customElements.define("ml-search-bar",i);var r={esc:27,leftArrow:37,rightArrow:39};class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._children=[],this.render()}set children(e){this._children=e,this.renderChildren()}get children(){return this._children}renderChildren(){const e=this.children.map(e=>`<div class="grid-item">\n          ${e}\n        </div>`);this.shadowRoot.querySelector(".grid").innerHTML=e.join("\n")}render(){const e=document.createElement("template");e.innerHTML="\n      <style>\n        .grid {\n          display: flex;\n          flex-wrap: wrap;\n        }\n\n        .grid-item {\n          width: 100%;\n        }\n\n        @media (min-width: 768px) {\n          .grid-item {\n            flex: 1;\n          }\n\n          .grid--fit > .grid-item {\n            flex: 1;\n          }\n\n          .grid--full > .grid-item {\n            flex: 0 0 100%;\n          }\n\n          .grid--1of2 > .grid-item {\n            flex: 0 0 50%;\n            width: 50%;\n          }\n\n          .grid--1of3 > .grid-item {\n            flex: 0 0 33.3333%;\n            width: 33.3333%;\n          }\n\n          .grid--1of4 > .grid-item {\n            flex: 0 0 25%;\n            width: 25%;\n          }\n        }\n\n        .thumbnail {\n          background-color: $white;\n          border-radius: 4px;\n          border: 1px solid $gray;\n          box-shadow: 1px 1px 5px $black;\n          padding: 5px;\n        }\n        .fill-image {\n          border-radius: 4px;\n          background-position: center;\n          background-size: cover;\n          cursor: pointer;\n        }\n        .fill-image:before {\n          content: '';\n          display: block;\n          padding-bottom: calc(100% * 9/16);\n        }\n      </style>\n      <div class=\"grid grid grid--1of4\">\n      </div>\n    ",this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.shadowRoot.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let t=e.target;for(;"function"==typeof t.getAttribute&&"string"!=typeof t.getAttribute("data-src")&&t!==this;)t=t.parentNode;let n="";"function"==typeof t.getAttribute&&(n=t.getAttribute("data-src")),n&&this.dispatchEvent(new CustomEvent("click",{detail:n}))})}}window.customElements.define("ml-grid",s);class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._content=null,this.render()}set content(e){this._content=e,this.renderContent()}get content(){return this._content}renderContent(){this.shadowRoot.querySelector(".content-placeholder").innerHTML=this._content,this.shadowRoot.querySelector(".modal").classList.add("show-modal")}disconnectedCallback(){this.shadowRoot.querySelector(".close-button").removeEventListener("click"),document.removeEventListener("keydown")}render(){const e=document.createElement("template");e.innerHTML='\n      <style>\n        .modal {\n          position: fixed;\n          left: 0;\n          top: 0;\n          width: 100%;\n          height: 100%;\n          background-color: rgba(0, 0, 0, 0.5);\n          opacity: 0;\n          visibility: hidden;\n          transform: scale(1.1);\n          transition: visibility 0s linear 0.25s, opacity 0.25s 0s, transform 0.25s;\n        }\n        .modal-content {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          background-color: white;\n          padding: 1rem 1.5rem;\n          width: 50rem;\n          border-radius: 0.5rem;\n        }\n        .close-button {\n          float: right;\n          width: 1.5rem;\n          line-height: 1.5rem;\n          text-align: center;\n          margin-top: -3rem;\n          margin-right: -3rem;\n          cursor: pointer;\n          color: violet;\n          background-color: black;\n          border-radius: 1rem;\n        }\n        .show-modal {\n          opacity: 1;\n          visibility: visible;\n          transform: scale(1.0);\n          transition: visibility 0s linear 0s, opacity 0.25s 0s, transform 0.25s;\n        }\n        .fill-image {\n          border-radius: 4px;\n          background-position: center;\n          background-size: cover;\n        }\n        .fill-image:before {\n          content: \'\';\n          display: block;\n          padding-bottom: calc(100% * 9/16);\n        }\n      </style>\n      <div class="modal">\n        <div class="modal-content">\n          <span class="close-button">&times;</span>\n          <div class="content-placeholder"></div>\n        </div>\n      </div>\n    ',this.shadowRoot.appendChild(e.content.cloneNode(!0));const t=this.shadowRoot.querySelector(".close-button"),n=this.shadowRoot.querySelector(".modal");function o(){n.classList.toggle("show-modal")}t.addEventListener("click",o),document.addEventListener("keydown",e=>{const{keyCode:t}=e;t===r.esc&&o()})}}window.customElements.define("ml-modal",a);class c extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._items=[],this.render()}set items(e){this._items=e,this.renderImages()}get items(){return this._items}disconnectedCallback(){this.shadowRoot.querySelector("ml-grid").removeEventListener("click"),document.removeEventListener("keydown")}renderImages(){const e=this.items.map(e=>`<div class="thumbnail">\n          <div class="fill-image" style="background-image: url(${e.media.m})" data-src="${e.media.m}"></div>\n        </div>`);this.shadowRoot.querySelector("ml-grid").children=e}render(){const e=document.createElement("template");e.innerHTML="\n      <style>\n      </style>\n      <ml-modal></ml-modal>\n      <ml-grid></ml-grid>\n    ",this.shadowRoot.appendChild(e.content.cloneNode(!0));const t=this.shadowRoot.querySelector("ml-modal"),n=async e=>{const n=e.detail;this._lastShown=n;const i=this.items.find(e=>e.media.m===n);if(!i)return void alert("Did not find clicked image in list of items");const r=await async function(e){const t=`/rest/?method=flickr.photos.getSizes&api_key=1c00c6a8b785a5baf3fb98859ae3ed18&photo_id=${function(e){const t=e.split("/"),n=t.pop();return n||t.pop()}(e)}&format=json`;return Object(o.a)(t,"jsonFlickrFeed")}(i.link);if(!r)return void alert("Image failed to fetch");let s=r.sizes.size.find(e=>"Original"===e.label);s&&s.source||(console.error("Did not find the original size image. Defaulting to thumbnail size"),s={source:n}),t.content=`\n        <div class="fill-image" style="background-image: url(${s.source})"></div>\n      `};this.shadowRoot.querySelector("ml-grid").addEventListener("click",n),document.addEventListener("keydown",e=>{const{keyCode:t}=e;if(this._lastShown&&t===r.leftArrow){const e=this.items.findIndex(e=>e.media.m===this._lastShown),t=(this.items.length+e-1)%this.items.length;n({detail:this.items[t].media.m})}if(this._lastShown&&t===r.rightArrow){const e=(this.items.findIndex(e=>e.media.m===this._lastShown)+1)%this.items.length;n({detail:this.items[e].media.m})}})}}window.customElements.define("ml-image-grid",c);class d extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.render()}disconnectedCallback(){this.shadowRoot.querySelector("ml-search-bar").removeEventListener("submit")}render(){const e=document.createElement("template");e.innerHTML="\n      <ml-search-bar></ml-search-bar>\n      <ml-image-grid></ml-image-grid>\n    ",this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.shadowRoot.querySelector("ml-search-bar").addEventListener("submit",e=>{this.shadowRoot.querySelector("ml-image-grid").items=e.detail.items})}}window.customElements.define("ml-app",d),n(2),n(3)}]);
//# sourceMappingURL=index.js.map